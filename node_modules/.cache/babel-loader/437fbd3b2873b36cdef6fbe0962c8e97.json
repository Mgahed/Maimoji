{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\maimoji\\\\src\\\\ChatHistory.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport './UserProfile.css';\nimport Button from '@material-ui/core/Button';\nimport logo from './logo.png';\n\nclass ChatHistory extends Component {\n  constructor(props) {\n    super(props);\n\n    this.changeHandler = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.submitHandler = e => {\n      e.preventDefault();\n      console.log(this.state);\n      axios.post('https://maimoji.herokuapp.com/api/message', this.state).then(response => {\n        var mgahd = response.data.boolean; //  var loops = response.data.loop;\n\n        console.log(response.data);\n\n        if (mgahd === \"True\") {\n          var whats = response.data.whatsapp;\n          window.location.replace(whats);\n          console.log(response.data); //   window.location.replace(\"http://localhost:3000/chathistory\")\n        } else {\n          alert(\"Error\");\n          console.log(mgahd);\n        } //document.getElementById(\"Demo\").innerHTML = mgahd;\n\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    var sender = sessionStorage.getItem(\"id\");\n    var reciver = JSON.parse(window.localStorage.getItem(\"rec\")); // Retrieving\n\n    this.state = {\n      sender: sender,\n      reciver: reciver // mgahd: 'False'\n\n    };\n  }\n\n  render() {\n    var messages = JSON.parse(window.localStorage.getItem(\"messages\")); // Retrieving\n    // var id = sessionStorage.getItem(\"id\");\n\n    var loops = JSON.parse(window.localStorage.getItem(\"loops\")); // Retrieving\n\n    var dates = JSON.parse(window.localStorage.getItem(\"dates\")); // Retrieving\n\n    var senders = JSON.parse(window.localStorage.getItem(\"senders\")); // Retrieving\n\n    var recivers = JSON.parse(window.localStorage.getItem(\"recivers\")); // Retrieving\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    /*#__PURE__*/\n    React.createElement(\"script\", {\n      defer: true,\n      src: \"face-api.min.js\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 1\n      }\n    });\n    const video = document.getElementById('video');\n    Promise.all([faceapi.nets.tinyFaceDetector.loadFromUri('/models'), faceapi.nets.faceLandmark68Net.loadFromUri('/models'), faceapi.nets.faceRecognitionNet.loadFromUri('/models'), faceapi.nets.faceExpressionNet.loadFromUri('/models')]).then(startVideo);\n\n    function startVideo() {\n      navigator.getUserMedia({\n        video: {}\n      }, stream => video.srcObject = stream, err => console.error(err));\n    }\n\n    var neutral1 = -1;\n    var happy1 = -1;\n    var sad1 = -1;\n    video.addEventListener('play', () => {\n      const canvas = faceapi.createCanvasFromMedia(video);\n      document.body.append(canvas);\n      const displaySize = {\n        width: video.width,\n        height: video.height\n      };\n      faceapi.matchDimensions(canvas, displaySize);\n      setInterval(async () => {\n        const detections = await faceapi.detectAllFaces(video, new faceapi.TinyFaceDetectorOptions()).withFaceLandmarks().withFaceExpressions();\n        const resizedDetections = faceapi.resizeResults(detections, displaySize);\n        canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height); // faceapi.draw.drawDetections(canvas, resizedDetections)\n        // faceapi.draw.drawFaceLandmarks(canvas, resizedDetections)\n        // faceapi.draw.drawFaceExpressions(canvas, resizedDetections)\n\n        var neutral = detections[0].expressions.neutral;\n        var happy = detections[0].expressions.happy;\n        var sad = detections[0].expressions.sad;\n\n        if (neutral <= 1 && neutral >= 0) {\n          neutral1 = neutral;\n          sessionStorage.setItem(\"neutral1\", neutral1);\n        }\n\n        if (happy <= 1 && happy >= 0) {\n          happy1 = happy;\n          sessionStorage.setItem(\"happy1\", happy1);\n        }\n\n        if (sad <= 1 && sad >= 0) {\n          sad1 = sad;\n          sessionStorage.setItem(\"sad1\", sad1);\n        }\n\n        console.log(\"happy : \" + happy1);\n        console.log(\"neutral : \" + neutral1);\n        console.log(\"sad : \" + sad1);\n      }, 100);\n    });\n\n    function fn() {\n      return [neutral1, happy1, sad1];\n    } //////////////////////////////////////////////////////////////////////\n    // const items = []\n    // for (const [index, value] of elements.entries()) {\n    //     items.push(<li key={index}>{value}</li>)\n\n\n    var sender1 = [];\n    var date1 = [];\n    var reciever1 = [];\n    var message1 = [];\n\n    for (var i = 0; i < loops; i++) {\n      sender1.push(senders[i]);\n      date1.push(dates[i]);\n      reciever1.push(recivers[i]);\n      message1.push(messages[i]);\n    }\n\n    const {\n      sender,\n      reciver\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-lg-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"about-avatar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: logo,\n      alt: \"Logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(\"h1\", {\n      class: \"dark-color\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 21\n      }\n    }, \"Chat History\"), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"row about-list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 29\n      }\n    }, dates.map((value, index) => {\n      var z = value;\n      console.log(z); // return <option value={z}>{Arr[index]}</option>\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        class: \"card text-white bg-info mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 44\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"card-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 41\n        }\n      }, date1[index]), /*#__PURE__*/React.createElement(\"div\", {\n        class: \"card-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        class: \"card-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 45\n        }\n      }, \"Sender: \", sender1[index]), /*#__PURE__*/React.createElement(\"p\", {\n        class: \"card-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 45\n        }\n      }, message1[index])));\n    }), /*#__PURE__*/React.createElement(\"video\", {\n      class: \"Right\",\n      id: \"video\",\n      width: \"720\",\n      height: \"560\",\n      autoplay: true,\n      muted: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      class: \"Right\",\n      onSubmit: this.submitHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      name: \"sender5\",\n      type: \"hidden\",\n      value: sender,\n      onChange: this.changeHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"reciver5\",\n      type: \"hidden\",\n      value: reciver,\n      onChange: this.changeHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"fixed-bottom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"input-group mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      name: \"msg\",\n      type: \"text\",\n      class: \"form-control\",\n      placeholder: \"Recipient's username\",\n      \"aria-label\": \"Recipient's username\",\n      \"aria-describedby\": \"button-addon2\",\n      onChange: this.changeHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 45\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"input-group-append\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      class: \"btn btn-outline-secondary\",\n      type: \"submit\",\n      id: \"button-addon2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 49\n      }\n    }, \"Send\")))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 37\n      }\n    })))))));\n  }\n\n}\n\nexport default ChatHistory;","map":{"version":3,"sources":["C:/Users/Lenovo/maimoji/src/ChatHistory.js"],"names":["React","Component","axios","Button","logo","ChatHistory","constructor","props","changeHandler","e","setState","target","name","value","submitHandler","preventDefault","console","log","state","post","then","response","mgahd","data","boolean","whats","whatsapp","window","location","replace","alert","catch","error","sender","sessionStorage","getItem","reciver","JSON","parse","localStorage","render","messages","loops","dates","senders","recivers","video","document","getElementById","Promise","all","faceapi","nets","tinyFaceDetector","loadFromUri","faceLandmark68Net","faceRecognitionNet","faceExpressionNet","startVideo","navigator","getUserMedia","stream","srcObject","err","neutral1","happy1","sad1","addEventListener","canvas","createCanvasFromMedia","body","append","displaySize","width","height","matchDimensions","setInterval","detections","detectAllFaces","TinyFaceDetectorOptions","withFaceLandmarks","withFaceExpressions","resizedDetections","resizeResults","getContext","clearRect","neutral","expressions","happy","sad","setItem","fn","sender1","date1","reciever1","message1","i","push","map","index","z"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from 'axios'\r\nimport './UserProfile.css';\r\nimport Button from '@material-ui/core/Button';\r\nimport logo from './logo.png';\r\n\r\n\r\n\r\nclass ChatHistory extends Component {\r\n\r\n\r\n\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        var sender = sessionStorage.getItem(\"id\");\r\n        var reciver = JSON.parse(window.localStorage.getItem(\"rec\")); // Retrieving\r\n\r\n        this.state = {\r\n\r\n            sender: sender,\r\n            reciver: reciver\r\n            // mgahd: 'False'\r\n        }\r\n    }\r\n\r\n    changeHandler = e => {\r\n        this.setState({ [e.target.name]: e.target.value })\r\n    }\r\n\r\n    submitHandler = e => {\r\n        e.preventDefault()\r\n        console.log(this.state)\r\n        axios\r\n            .post('https://maimoji.herokuapp.com/api/message', this.state)\r\n            .then(response => {\r\n\r\n                var mgahd = response.data.boolean;\r\n                //  var loops = response.data.loop;\r\n                console.log(response.data)\r\n\r\n                if (mgahd === \"True\") {\r\n                    var whats = response.data.whatsapp\r\n                    window.location.replace(whats)\r\n\r\n                    console.log(response.data)\r\n\r\n\r\n\r\n                    //   window.location.replace(\"http://localhost:3000/chathistory\")\r\n\r\n                } else {\r\n                    alert(\"Error\");\r\n                    console.log(mgahd)\r\n                }\r\n                //document.getElementById(\"Demo\").innerHTML = mgahd;\r\n\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n    }\r\n\r\n    render() {\r\n\r\n        var messages = JSON.parse(window.localStorage.getItem(\"messages\")); // Retrieving\r\n        // var id = sessionStorage.getItem(\"id\");\r\n        var loops = JSON.parse(window.localStorage.getItem(\"loops\")); // Retrieving\r\n        var dates = JSON.parse(window.localStorage.getItem(\"dates\")); // Retrieving\r\n        var senders = JSON.parse(window.localStorage.getItem(\"senders\")); // Retrieving\r\n        var recivers = JSON.parse(window.localStorage.getItem(\"recivers\")); // Retrieving\r\n \r\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n<script defer src=\"face-api.min.js\"></script>\r\nconst video = document.getElementById('video')\r\n\r\nPromise.all([\r\n  faceapi.nets.tinyFaceDetector.loadFromUri('/models'),\r\n  faceapi.nets.faceLandmark68Net.loadFromUri('/models'),\r\n  faceapi.nets.faceRecognitionNet.loadFromUri('/models'),\r\n  faceapi.nets.faceExpressionNet.loadFromUri('/models')\r\n]).then(startVideo)\r\n\r\nfunction startVideo() {\r\n  navigator.getUserMedia(\r\n    { video: {} },\r\n    stream => video.srcObject = stream,\r\n    err => console.error(err)\r\n  )\r\n}\r\nvar neutral1 = -1;\r\nvar happy1 = -1;\r\nvar sad1 = -1;\r\nvideo.addEventListener('play', () => {\r\n  const canvas = faceapi.createCanvasFromMedia(video)\r\n  document.body.append(canvas)\r\n  const displaySize = { width: video.width, height: video.height }\r\n  faceapi.matchDimensions(canvas, displaySize)\r\n  setInterval(async () => {\r\n    const detections = await faceapi.detectAllFaces(video, new faceapi.TinyFaceDetectorOptions()).withFaceLandmarks().withFaceExpressions()\r\n    const resizedDetections = faceapi.resizeResults(detections, displaySize)\r\n    canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height)\r\n    // faceapi.draw.drawDetections(canvas, resizedDetections)\r\n    // faceapi.draw.drawFaceLandmarks(canvas, resizedDetections)\r\n    // faceapi.draw.drawFaceExpressions(canvas, resizedDetections)\r\n    var neutral = detections[0].expressions.neutral\r\n    var happy = detections[0].expressions.happy\r\n    var sad = detections[0].expressions.sad\r\n    if (neutral<=1&&neutral>=0) {\r\n      neutral1 = neutral;\r\n      sessionStorage.setItem(\"neutral1\",neutral1);\r\n    }\r\n    if (happy<=1&&happy>=0) {\r\n      happy1 = happy;\r\n      sessionStorage.setItem(\"happy1\",happy1);\r\n    }\r\n    if (sad<=1&&sad>=0) {\r\n      sad1 = sad;\r\n      sessionStorage.setItem(\"sad1\",sad1);\r\n    }\r\n\r\n    console.log(\"happy : \" + happy1);\r\n    console.log(\"neutral : \" + neutral1);\r\n    console.log(\"sad : \" + sad1);\r\n  }, 100)\r\n})\r\nfunction fn(){\r\nreturn [neutral1, happy1, sad1];\r\n}\r\n//////////////////////////////////////////////////////////////////////\r\n\r\n\r\n\r\n        // const items = []\r\n\r\n        // for (const [index, value] of elements.entries()) {\r\n        //     items.push(<li key={index}>{value}</li>)\r\n\r\n        var sender1 = [];\r\n        var date1 = [];\r\n        var reciever1 = [];\r\n        var message1 = [];\r\n        for (var i = 0; i < loops; i++) {\r\n            sender1.push(senders[i])\r\n            date1.push(dates[i])\r\n            reciever1.push(recivers[i])\r\n            message1.push(messages[i])\r\n\r\n\r\n        }\r\n\r\n\r\n\r\n        const { sender, reciver } = this.state\r\n\r\n        return (\r\n\r\n\r\n            <div>\r\n                {/* <div class=\"card text-center\">\r\n                    <div class=\"card-header\">\r\n                        <ul class=\"nav nav-pills card-header-pills\">\r\n                            <li class=\"nav-item\">\r\n                                <a class=\"nav-link\" href=\"/UserProfile\" variant=\"body2\">UserProfile</a>\r\n                            </li>\r\n                            <li class=\"nav-item\">\r\n                                <a class=\"nav-link active\" href=\"/Contacts\" variant=\"body2\">Contacts</a>\r\n\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </div> */}\r\n\r\n                {/* <div>\r\n                    {items}\r\n                </div> */}\r\n\r\n                <div>\r\n\r\n                    <div class=\"col-lg-6\">\r\n                        <div class=\"about-avatar\">\r\n                            <img src={logo} alt=\"Logo\" />\r\n                        </div>\r\n                    </div>\r\n                    <h1 class=\"dark-color\">Chat History</h1>\r\n                    <h2>\r\n\r\n                        <div class=\"row about-list\">\r\n                            <div class=\"col-md-6\">\r\n\r\n                                {/* <input name=\"sender\" type=\"hidden\" value={sen} onChange={this.changeHandler}></input> */}\r\n                                {dates.map((value, index) => {\r\n                                    var z = value;\r\n                                    console.log(z)\r\n                                    // return <option value={z}>{Arr[index]}</option>\r\n\r\n\r\n                                    return <div class=\"card text-white bg-info mb-3\" >\r\n                                        <div class=\"card-header\">{date1[index]}</div>\r\n                                        <div class=\"card-body\">\r\n                                            <h1 class=\"card-title\">Sender: {sender1[index]}</h1>\r\n\r\n                                            <p class=\"card-text\">{message1[index]}</p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                })}\r\n                                <video class=\"Right\" id=\"video\" width=\"720\" height=\"560\" autoplay muted></video>\r\n                                <form class=\"Right\" onSubmit={this.submitHandler}>\r\n                                    <input name=\"sender5\" type=\"hidden\" value={sender} onChange={this.changeHandler}></input>\r\n                                    <input name=\"reciver5\" type=\"hidden\" value={reciver} onChange={this.changeHandler}></input>\r\n                                    <div class=\"fixed-bottom\">\r\n                                        <div class=\"input-group mb-3\">\r\n\r\n                                            <input name=\"msg\" type=\"text\" class=\"form-control\" placeholder=\"Recipient's username\" aria-label=\"Recipient's username\" aria-describedby=\"button-addon2\" onChange={this.changeHandler}></input>\r\n                                            <div class=\"input-group-append\">\r\n                                                <Button class=\"btn btn-outline-secondary\" type=\"submit\" id=\"button-addon2\">Send</Button>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                    </div>\r\n                                    <br></br>\r\n\r\n                                </form>\r\n\r\n                            </div>\r\n\r\n\r\n                        </div>\r\n\r\n                    </h2>\r\n\r\n\r\n\r\n                </div >\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n            </div>\r\n\r\n\r\n        )\r\n    }\r\n}\r\n\r\nexport default ChatHistory"]},"metadata":{},"sourceType":"module"}